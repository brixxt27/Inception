version: '3'

services:
  mysql:
    build: ./requirements/mysql/.
    container_name: mysql
    volumes:
      - ./db_data:/var/lib/mysql
    env_file:
      - .env
    networks:
      - jayoon
    restart: always
    tty: true

  #wordpress:
  #  build: ./requirements/wordpress/.
  #  container_name: wordpress
  #  volumes:
  #    - ./wp_data:/var/www/html
  #  depends_on:
  #    - mysql
  #  env_file:
  #    - .env
  #  networks:
  #    - jayoon
  #  restart: always
  #  tty: true

  nginx:
    build: ./requirements/nginx/.
    container_name: nginx
    volumes:
      - ./wp_data:/var/www/html
    depends_on:
    #  - wordpress
      - mysql
    ports:
      - 8080:80
      - 443:443
    networks:
      - jayoon
    restart: always
    tty: true

volumes:
  wp_data:
  db_data:

networks:
  jayoon:
    driver: bridge